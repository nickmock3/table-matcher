# トップ画面（公開ユーザー向け）実装計画

## 1. 対象仕様
- 仕様書: `docs/specs/features/top-page-user-home.md`
- 対象範囲: 公開トップ兼一覧画面のUI実装と主要導線成立

## 2. 実装方針
- `src/app/page.tsx` は画面エントリに留め、一覧表示や検索条件処理は `src/features/top-page/` 配下へ切り出す。
- 初期はトランザクションスクリプト方式で、表示に必要な取得・整形ロジックを機能単位で整理する。
- デザインは「価値訴求ファースト + 条件検索 + 一覧」の3ブロック構成で実装する。
- 店舗詳細遷移先は `/stores/[storeId]` を採用する。
- 検索UIの初期値は「空席のみ: ON」「市区町村/ジャンル: 未選択」を採用する。
- データ取得は段階導入とし、TASK-TP-001では固定モック、TASK-TP-002で差し替え可能な取得層へ移行する。

## 3. 成果物
- 画面コンポーネント（ヒーロー、検索フォーム、店舗一覧、空状態）
- 一覧ソート/フィルタロジック
- トップ主要導線E2E
- 仕様反映済みのタスク定義

## 4. 実装ステップ
1. 画面骨格を作成（ヒーロー、検索エリア、一覧エリア、空状態）。
2. 一覧データの表示モデルを定義し、ソート/フィルタ処理を実装。
3. 店舗詳細遷移の導線を接続（`/stores/[storeId]`）。
4. Unitテストを追加（ソート/フィルタ/空状態）。
5. E2Eテストを追加（`/` から詳細遷移までの主要導線）。
6. lint + unit + e2e を実行してDoD確認。

## 5. テスト計画
- lint: `bun run lint`
- unit: `Vitest`（対象: 条件正規化・並び順ロジック・空状態判定）
- e2e: `Playwright`（対象: トップ表示、条件変更、詳細遷移）

## 6. リスクと対策
- リスク: MVP初期データ不足でUI検証が困難。
- 対策: 検証用Seedデータを先行準備する。

## 7. 完了条件（DoD）
- `docs/specs/features/top-page-user-home.md` の受け入れ条件を満たす。
- `spec + plan + tasks` の整合が取れている。
- `bun run lint` と関連unit、必要e2eが通過している。
- AIレビューでブロッカー指摘がない、または対応方針が記録されている。

## 8. 変更履歴
- 2026-02-12: 初版作成
- 2026-02-12: 店舗詳細URL・検索初期値・MVPのデータ取得段階導入方針を反映
